<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Jewelicious Nepal</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="page">
    <nav class="nav" aria-label="Main navigation">
      <div class="nav-brand">Jewelicious Nepal</div>
      <div class="nav-links">
        <a class="active" href="index.html">Home</a>
        <a href="products.html">Products</a>
        <a href="about.html">About Us</a>
      </div>
    </nav>
    <section class="hero">
      <header>
        <div class="logo">
          <img src="images/logo.png" alt="Project logo" />
        </div>
        <h1>Jewelicious Nepal</h1>
        <p>Search, explore, and compare curated items instantly.</p>
        <div class="hero-actions">
          <a class="button" href="products.html">Shop the Collection</a>
          <a class="button secondary" href="#contact">Book a Consultation</a>
        </div>
      </header>

      <div class="search-wrap">
        <label class="search" aria-label="Search products">
          <span aria-hidden="true">&#128269;</span>
          <input id="searchInput" type="text" placeholder="Search by product name..." />
        </label>
      </div>
    </section>

    <section class="trust-strip" aria-label="Trust highlights">
      <div class="trust-item">
        <h3>18k gold plated</h3>
        <p>Stainless steel with 18k gold plating.</p>
      </div>
      <div class="trust-item">
        <h3>Gift-Ready Packaging</h3>
        <p>Signature boxes and notes for special moments.</p>
      </div>
      <div class="trust-item">
        <h3>Custom Orders</h3>
        <p>Personalized collection of gifts.</p>
      </div>
    </section>

    <div id="status" class="status">Loading products...</div>
    <section id="productGrid" class="grid" aria-live="polite"></section>

    <section class="section">
      <h2>Testimonials</h2>
      <div class="testimonial-grid">
        <article class="testimonial-card">
          <p class="testimonial-quote">"The product is stunning and the service felt truly personal."</p>
          <h3>Rina K.</h3>
          <span>Custom hand Set</span>
        </article>
        <article class="testimonial-card">
          <p class="testimonial-quote">"Beautiful packaging and fast delivery. My go-to gift store now."</p>
          <h3>Sanjay P.</h3>
          <span>Anniversary Gift</span>
        </article>
        <article class="testimonial-card">
          <p class="testimonial-quote">"They helped me match pieces for a festival look perfectly."</p>
          <h3>Anita B.</h3>
          <span>Festival Styling</span>
        </article>
      </div>
    </section>

    <section class="section" id="contact">
      <div class="contact-grid">
        <div class="contact-aside">
          <h2>Contact Us</h2>
          <p>Share your idea or request a custom collection for gifts. We reply within 24 hours.</p>
          <div class="contact-details">
            <p><strong>Phone:</strong> +977 9864686868</p>
            <p><strong>Email:</strong> jeweliciousnepal@gmail.com</p>
            <p><strong>Visit:</strong> Banepa, Kavre, Nepal</p>
          </div>
          <a class="button whatsapp" href="https://wa.me/9779864686868" target="_blank" rel="noopener">
            Chat on WhatsApp
          </a>
        </div>
        <form class="contact-form" action="mailto:jeweliciousnepal@gmail.com" method="post" enctype="text/plain">
          <label class="form-field">
            <span>Name</span>
            <input type="text" name="name" placeholder="Your full name" required />
          </label>
          <label class="form-field">
            <span>Email</span>
            <input type="email" name="email" placeholder="you@example.com" required />
          </label>
          <label class="form-field">
            <span>What are you looking for?</span>
            <input type="text" name="interest" placeholder="Custom order, gift, consultation" />
          </label>
          <label class="form-field">
            <span>Message</span>
            <textarea name="message" rows="5" placeholder="Tell us about your idea..." required></textarea>
          </label>
          <button class="button" type="submit">Send Message</button>
        </form>
      </div>
    </section>

    <footer class="footer" aria-label="Jewelicious Nepal footer">
      <div class="footer-inner">
        <div class="footer-brand">
          <h2>Jewelicious Nepal</h2>
          <p>18k gold plated jewelries.</p>
        </div>
        <div class="footer-grid">
          <div class="footer-col">
            <h3>Visit</h3>
            <p>Banepa, Kavre, Nepal</p>
          </div>
          <div class="footer-col">
            <h3>Contact</h3>
            <p>+977 986468686868</p>
            <p>jeweliciousnepal@gmail.com</p>
          </div>
          <div class="footer-col">
            <h3>Hours</h3>
            <p>Sun–Fri: 10:00 AM–7:00 PM</p>
            <p>Sat: Closed</p>
          </div>
          <div class="footer-col">
            <h3>Social</h3>
            <a href="https://instagram.com/jeweliciousnepal" target="_blank" rel="noopener">Instagram</a><br />
            <a href="https://facebook.com/jeweliciousnepal" target="_blank" rel="noopener">Facebook</a><br />
            <a href="https://wa.me/9779800000000" target="_blank" rel="noopener">WhatsApp</a>
          </div>
        </div>
        <div class="footer-bottom">© 2026 Jewelicious Nepal. All rights reserved.</div>
      </div>
    </footer>
  </div>

  <div id="modal" class="modal" role="dialog" aria-modal="true" aria-hidden="true">
    <div class="modal-content">
      <img id="modalImage" alt="" />
      <div class="modal-body">
        <span class="type-badge" id="modalType"></span>
        <h2 id="modalTitle"></h2>
        <p id="modalDescription"></p>
        <div class="price" id="modalPrice"></div>
        <button class="modal-close" id="modalClose">Close</button>
      </div>
    </div>
  </div>

  <script>
    const SHEET_ID = "1_jVEtTvxCu8e19A5WY_9HuMlzqwc39RNJ4slFDcGpQ8";
    const DATA_URL = `https://opensheet.elk.sh/${SHEET_ID}/Sheet1`;

    const searchInput = document.getElementById("searchInput");
    const productGrid = document.getElementById("productGrid");
    const statusEl = document.getElementById("status");

    const modal = document.getElementById("modal");
    const modalImage = document.getElementById("modalImage");
    const modalTitle = document.getElementById("modalTitle");
    const modalDescription = document.getElementById("modalDescription");
    const modalPrice = document.getElementById("modalPrice");
    const modalType = document.getElementById("modalType");
    const modalClose = document.getElementById("modalClose");

    let products = [];

    const escapeHtml = (value) => {
      const div = document.createElement("div");
      div.textContent = value ?? "";
      return div.innerHTML;
    };

    const formatPrice = (value) => {
      if (!value) return "";
      const numeric = Number(String(value).replace(/[^0-9.]/g, ""));
      if (Number.isNaN(numeric)) return value;
      return new Intl.NumberFormat("en-US", {
        style: "currency",
        currency: "USD",
        maximumFractionDigits: 2
      }).format(numeric);
    };

    const getType = (item) => {
      const source = `${item.Name || ""} ${item.Description || ""}`.toLowerCase();
      if (/(earring|earrings|earing)/.test(source)) return "Earrings";
      if (/(ring|rings)/.test(source)) return "Rings";
      if (/(necklace|necklaces)/.test(source)) return "Necklaces";
      if (/(bracelet|bracelets)/.test(source)) return "Bracelets";
      if (/(hairpin|hair pins|hair pin)/.test(source)) return "Hairpins";
      return "Accessories";
    };

    const renderProducts = (items) => {
      productGrid.innerHTML = "";

      if (!items.length) {
        const empty = document.createElement("div");
        empty.className = "empty";
        empty.textContent = "No products match your search.";
        productGrid.appendChild(empty);
        return;
      }

      items.forEach((item) => {
        const typeLabel = getType(item);
        const card = document.createElement("article");
        card.className = "card";
        card.innerHTML = `
          <img src="${escapeHtml(item.ImageURL)}" alt="${escapeHtml(item.Name)}" />
          <div class="card-body">
            <span class="type-badge">${escapeHtml(typeLabel)}</span>
            <h3>${escapeHtml(item.Name)}</h3>
            <p>${escapeHtml(item.Description || "")}</p>
            <div class="price">${escapeHtml(formatPrice(item.Price))}</div>
            <button class="button" data-id="${escapeHtml(item.ID)}">View Details</button>
          </div>
        `;
        productGrid.appendChild(card);
      });
    };

    const openModal = (item) => {
      modalImage.src = item.ImageURL || "";
      modalImage.alt = item.Name || "";
      modalTitle.textContent = item.Name || "";
      modalDescription.textContent = item.Description || "";
      modalPrice.textContent = formatPrice(item.Price);
      modalType.textContent = getType(item);
      modal.classList.add("open");
      modal.setAttribute("aria-hidden", "false");
    };

    const closeModal = () => {
      modal.classList.remove("open");
      modal.setAttribute("aria-hidden", "true");
    };

    const loadProducts = async () => {
      statusEl.textContent = "Loading products...";
      statusEl.style.display = "block";
      try {
        const response = await fetch(DATA_URL);
        if (!response.ok) {
          throw new Error("Failed to fetch products.");
        }
        const data = await response.json();
        products = Array.isArray(data) ? data : [];
        renderProducts(products);
        statusEl.style.display = "none";
      } catch (error) {
        statusEl.textContent = "Unable to load products. Check the sheet ID or try again later.";
      }
    };

    searchInput.addEventListener("input", (event) => {
      const query = event.target.value.toLowerCase();
      const filtered = products.filter((product) =>
        `${product.Name || ""} ${product.Description || ""} ${getType(product)}`
          .toLowerCase()
          .includes(query)
      );
      renderProducts(filtered);
    });

    productGrid.addEventListener("click", (event) => {
      const button = event.target.closest("button[data-id]");
      if (!button) return;
      const item = products.find((product) => String(product.ID) === button.dataset.id);
      if (item) {
        openModal(item);
      }
    });

    modalClose.addEventListener("click", closeModal);
    modal.addEventListener("click", (event) => {
      if (event.target === modal) {
        closeModal();
      }
    });

    document.addEventListener("keydown", (event) => {
      if (event.key === "Escape" && modal.classList.contains("open")) {
        closeModal();
      }
    });

    loadProducts();
  </script>
</body>
</html>
